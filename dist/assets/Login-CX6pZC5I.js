import{c as g,a as t,y as ae,u as te,t as se,j as e,m as r,A as re,L as R}from"./index-D3bZ8EQR.js";import{B as q}from"./button-Dn6WXJOc.js";import{I as K}from"./input-eshf1J7M.js";import{C as z,L as d}from"./label-BdoalC1J.js";import{C as H}from"./checkbox-D7tBNmD7.js";import{C as ie,a as ne,b as ce,c as le,d as oe}from"./card-7ABFXqAC.js";import{S as de,a as me,b as he,c as xe,d as ue}from"./select-DCmQhG-4.js";import{D as pe,a as ge,b as fe,c as ye,d as be}from"./dialog-OCQcdc8r.js";import{u as je,P as Ne}from"./useAnalytics-b5TyfALi.js";import{S as G}from"./shield-DV2IjRxZ.js";import{C as ve}from"./circle-check-big-geyjb56P.js";import{M as we}from"./mail-9r1LQtgw.js";import{L as ke}from"./lock-DllgX7BB.js";import{E as Se,L as $}from"./loader-circle-70vVQnpT.js";import{E as Ce}from"./eye-BWznZfxH.js";import{A as qe}from"./arrow-right-BXeistSb.js";import{T as Ke}from"./timer-U7D0eyg3.js";import"./component-Ct7zKDin.js";import"./chevron-down-BCeAy4Fc.js";import"./chevron-up-ByoQHxLh.js";/**
 * @license lucide-react v0.448.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=g("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.448.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=g("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.448.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=g("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.448.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=g("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),De=(n,u)=>n.startsWith(Pe(u))&&n.length>=8,Pe=n=>({Administration:"ADM",General:"GEN",Engineering:"ENG",Finance:"FIN",HR:"HRM"})[n]||"GEN",M=[{id:"accounting",name:"Accounting & Finance",prefix:"AC",description:"Financial management and reporting"},{id:"hr",name:"Human Resources",prefix:"HR",description:"Personnel and organizational development"},{id:"project-management",name:"Project Management",prefix:"PM",description:"Project oversight and execution"},{id:"business-development",name:"Business Development",prefix:"BD",description:"Strategic growth and partnerships"},{id:"digital-marketing",name:"Digital Marketing",prefix:"DM",description:"Marketing and communications"},{id:"secretariat-admin",name:"Secretariat & Administration",prefix:"SA",description:"Administrative support and coordination"},{id:"business-administration",name:"Business Administration",prefix:"BA",description:"Governance and policy management"}];function ta(){const[n,u]=t.useState(!1),[f,W]=t.useState(""),[y,X]=t.useState(""),[c,A]=t.useState(!1),[m,b]=t.useState(""),[h,p]=t.useState(""),[J,l]=t.useState(!1),[E,s]=t.useState(""),[D,j]=t.useState(""),[Y,_]=t.useState(!1),[N,P]=t.useState(!1),[x,U]=t.useState(0),{login:Q,isLoading:L,isAuthenticated:V}=ae(),{trackBusinessEvent:F}=je(),v=te(),w=se().state?.from?.pathname||"/dashboard";t.useEffect(()=>{V&&v(w,{replace:!0})},[V,v,w]),t.useEffect(()=>{c||(b(""),p(""),l(!1),s(""))},[c]);const Z=async(a,i)=>{await new Promise(C=>setTimeout(C,1500));const k=M.find(C=>C.id===i),S=k?.prefix||"";return a.startsWith(S)?a.length!==6?{isValid:!1,isExpired:!1,error:"UniqueKey must be 6 characters (2 letters + 4 digits)"}:De(a,i)?{isValid:!0,isExpired:!1,department:k?.name,expiresAt:new Date(Date.now()+10080*60*1e3).toISOString()}:a===`${S}9999`?{isValid:!1,isExpired:!0,error:"This UniqueKey has expired. Please contact your administrator."}:{isValid:!1,isExpired:!1,error:"Invalid UniqueKey. Please check your key and try again."}:{isValid:!1,isExpired:!1,error:`Key must start with ${S} for ${k?.name}`}},ee=async a=>{if(a.preventDefault(),s(""),j(""),!f||!y){s("Please fill in all fields");return}if(c&&!m){s("Please select your department");return}c?l(!0):await T()},I=async()=>{if(!h){s("Please enter your UniqueKey");return}P(!0),s("");try{const a=await Z(h,m);a.isValid?(j("UniqueKey verified successfully!"),l(!1),await T(m)):(U(i=>i+1),a.isExpired?(s(a.error||"UniqueKey has expired"),x>=2&&setTimeout(()=>{l(!1),A(!1),b(""),p(""),s("Too many failed attempts. Please contact your administrator.")},2e3)):(s(a.error||"Invalid UniqueKey"),x>=2&&setTimeout(()=>{l(!1),s("Too many failed attempts. Please try again later.")},2e3)))}catch{s("Failed to validate UniqueKey. Please try again.")}finally{P(!1)}},T=async a=>{const i=await Q(f,y);i.success?(F.userAuth("login"),a&&(localStorage.setItem("userDepartment",a),F.userAuth("staff_login",{department:a})),j("Login successful! Redirecting to dashboard..."),setTimeout(()=>{v(w,{replace:!0})},1e3)):s(i.error||"Login failed")},B=()=>{l(!1),p(""),s(""),U(0)},o=M.find(a=>a.id===m);return e.jsxs(Ne,{children:[e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs(r.div,{className:"hidden lg:flex lg:w-1/2 relative overflow-hidden",initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-arch-charcoal/95 to-arch-blue-gray/90 z-10"}),e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('https://cdn.builder.io/api/v1/image/assets%2F751ea84be0da437c8dd3f1bf04173189%2F3ea4e8ddcd314db6b491a8835cfb72ec?format=webp&width=800')"}}),e.jsx("div",{className:"relative z-20 flex flex-col justify-center p-12 text-white",children:e.jsxs(r.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.8,delay:.3},children:[e.jsx("div",{className:"mb-8",children:e.jsx("img",{src:"/images/brand/logo.jpg",alt:"JD Marc Limited Logo",className:"h-20 w-auto object-contain mx-auto"})}),e.jsx("h1",{className:"text-4xl font-bold mb-4 text-white",children:"Welcome Back"}),e.jsx("p",{className:"text-lg text-arch-light-blue mb-6",children:"Access your secure dashboard with enhanced staff verification"}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(G,{className:"h-5 w-5 text-arch-orange"}),e.jsx("span",{className:"font-semibold",children:"Enhanced Security"})]}),e.jsx("p",{className:"text-sm text-arch-light-blue",children:"Staff members require department verification with a 7-day UniqueKey for secure access."})]})]})})]}),e.jsx(r.div,{className:"w-full lg:w-1/2 flex items-center justify-center p-8 bg-gradient-to-br from-arch-light-blue/20 via-white to-arch-light-blue/30",initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8},children:e.jsxs(ie,{className:"w-full max-w-md shadow-2xl border-0 backdrop-blur-sm bg-white/95",children:[e.jsxs(ne,{className:"space-y-1 pb-8 bg-gradient-to-r from-arch-charcoal to-arch-blue-gray text-white rounded-t-lg",children:[e.jsx(ce,{className:"text-3xl font-bold text-center",children:"Secure Access"}),e.jsx(le,{className:"text-center text-arch-light-blue",children:"Enter your credentials to access your account"})]}),e.jsx(oe,{className:"p-8",children:e.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[E&&e.jsxs(r.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3",children:[e.jsx(z,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"text-red-700 text-sm",children:E})]}),D&&e.jsxs(r.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-3",children:[e.jsx(ve,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-green-700 text-sm",children:D})]}),e.jsxs(r.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.1},className:"bg-arch-light-blue/20 border border-arch-light-blue/40 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(H,{id:"staff-member",checked:c,onCheckedChange:a=>A(a),className:"border-arch-orange data-[state=checked]:bg-arch-orange data-[state=checked]:border-arch-orange"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5 text-arch-orange"}),e.jsx(d,{htmlFor:"staff-member",className:"text-arch-charcoal font-medium cursor-pointer",children:"Are you a staff member?"})]})]}),c&&e.jsx("p",{className:"text-xs text-arch-blue-gray mt-2 ml-8",children:"Staff members require department verification and a UniqueKey"})]}),e.jsx(re,{children:c&&e.jsxs(r.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"space-y-2",children:[e.jsx(d,{htmlFor:"department",className:"text-arch-charcoal font-medium",children:"Select Your Department *"}),e.jsxs(de,{value:m,onValueChange:b,children:[e.jsx(me,{className:"h-12 border-arch-light-blue/50 focus:border-arch-orange",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-arch-blue-gray"}),e.jsx(he,{placeholder:"Choose your department"})]})}),e.jsx(xe,{children:M.map(a=>e.jsx(ue,{value:a.id,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-6 bg-arch-orange/20 rounded text-xs font-mono flex items-center justify-center text-arch-orange",children:a.prefix}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a.description})]})]})},a.id))})]})]})}),e.jsxs(r.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"space-y-2",children:[e.jsx(d,{htmlFor:"email",className:"text-arch-charcoal font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(we,{className:"absolute left-3 top-3 h-5 w-5 text-arch-blue-gray"}),e.jsx(K,{id:"email",type:"email",placeholder:"your.email@jdmarcng.com",className:"pl-11 h-12 border-arch-light-blue/50 focus:border-arch-orange focus:ring-arch-orange/20",value:f,onChange:a=>W(a.target.value),required:!0})]})]}),e.jsxs(r.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.3},className:"space-y-2",children:[e.jsx(d,{htmlFor:"password",className:"text-arch-charcoal font-medium",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(ke,{className:"absolute left-3 top-3 h-5 w-5 text-arch-blue-gray"}),e.jsx(K,{id:"password",type:n?"text":"password",placeholder:"Enter your password",className:"pl-11 pr-11 h-12 border-arch-light-blue/50 focus:border-arch-orange focus:ring-arch-orange/20",value:y,onChange:a=>X(a.target.value),required:!0}),e.jsx("button",{type:"button",onClick:()=>u(!n),className:"absolute right-3 top-3 text-arch-blue-gray hover:text-arch-orange transition-colors",children:n?e.jsx(Se,{className:"h-5 w-5"}):e.jsx(Ce,{className:"h-5 w-5"})})]})]}),e.jsxs(r.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.4},className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{id:"remember",checked:Y,onCheckedChange:a=>_(a),className:"border-arch-light-blue data-[state=checked]:bg-arch-orange data-[state=checked]:border-arch-orange"}),e.jsx(d,{htmlFor:"remember",className:"text-sm text-arch-charcoal",children:"Remember me"})]}),e.jsx(R,{to:"/forgot-password",className:"text-sm text-arch-orange hover:text-arch-rust transition-colors",children:"Forgot password?"})]}),e.jsx(r.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.5},children:e.jsx(q,{type:"submit",className:"w-full h-12 bg-arch-orange hover:bg-arch-rust text-white font-semibold transition-all duration-300 flex items-center justify-center gap-2",disabled:L,children:L?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Signing in..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:c?"Proceed to Verification":"Sign In"}),e.jsx(qe,{className:"h-4 w-4"})]})})}),e.jsx(r.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.6},className:"text-center pt-4 border-t border-arch-light-blue/30",children:e.jsxs("p",{className:"text-arch-charcoal",children:["Don't have an account?"," ",e.jsx(R,{to:"/register",className:"text-arch-orange hover:text-arch-rust font-medium transition-colors",children:"Create one here"})]})})]})})]})})]}),e.jsx(pe,{open:J,onOpenChange:B,children:e.jsxs(ge,{className:"sm:max-w-md",children:[e.jsxs(fe,{children:[e.jsxs(ye,{className:"flex items-center gap-2 text-arch-charcoal",children:[e.jsx(O,{className:"h-5 w-5 text-arch-orange"}),"Staff Verification Required"]}),e.jsx(be,{className:"text-arch-blue-gray",children:"Please enter your department UniqueKey to complete secure access"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[o&&e.jsxs("div",{className:"bg-arch-light-blue/20 border border-arch-light-blue/40 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-8 bg-arch-orange/20 rounded text-sm font-mono flex items-center justify-center text-arch-orange",children:o.prefix}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-arch-charcoal",children:o.name}),e.jsx("p",{className:"text-xs text-arch-blue-gray",children:o.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-arch-blue-gray",children:[e.jsx(Ke,{className:"h-3 w-3"}),e.jsx("span",{children:"UniqueKeys expire after 7 days"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"unique-key",className:"text-arch-charcoal font-medium",children:"UniqueKey *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ae,{className:"absolute left-3 top-3 h-5 w-5 text-arch-blue-gray"}),e.jsx(K,{id:"unique-key",placeholder:`${o?.prefix||"XX"}1234`,className:"pl-11 h-12 text-center font-mono text-lg tracking-widest border-arch-light-blue/50 focus:border-arch-orange focus:ring-arch-orange/20",value:h,onChange:a=>{const i=a.target.value.toUpperCase().slice(0,6);p(i)},maxLength:6,autoFocus:!0,onKeyDown:a=>{a.key==="Enter"&&I()}})]}),e.jsxs("p",{className:"text-xs text-arch-blue-gray",children:["Format: ",o?.prefix,"#### (2 letters + 4 digits)"]})]}),x>0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm",children:["Attempt ",x,"/3 -"," ",3-x," attempts remaining"]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(q,{variant:"outline",onClick:B,className:"flex-1 border-arch-light-blue text-arch-charcoal hover:bg-arch-light-blue/20",disabled:N,children:"Cancel"}),e.jsx(q,{onClick:I,disabled:!h||h.length!==6||N,className:"flex-1 bg-arch-orange hover:bg-arch-rust text-white",children:N?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Verifying..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{children:"Verify & Login"})]})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2 text-blue-700",children:[e.jsx(G,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"font-medium mb-1",children:"Need a UniqueKey?"}),e.jsx("p",{children:"Contact your department administrator or IT support to generate a new 7-day access key."})]})]})})]})]})})]})}export{ta as default};
